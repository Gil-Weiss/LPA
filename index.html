<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Light Programming Interface</title>
        <link rel="icon" type="image/ico" href="images/favicon.ico">
        <link rel="stylesheet" href="css/StyleSheetX.css">
        <!-- All these are for tool tipster -->
        <!-- <link rel="stylesheet" type="text/css" href="css/tooltipster.css" /> -->
        <!-- <link rel="stylesheet" type="text/css" href="css/tooltipster-shadow.css" /> -->
        <link rel="stylesheet" media="screen" href="css/handsontable.full.min.css">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
        <script type="text/javascript" src="js/ui_animations.js"></script>
        <script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
        <!-- // <script type="text/javascript" src="js/jquery.tooltipster.min.js"></script> -->
    </head>
    <body  ng-app="LPI">
        <div class="header">
            <p>
                <a href="http://www.taborlab.rice.edu/" target="_blank" ><span id="labpage">LPI: Tabor lab</span></a>
<!--                 <span class="contact">Contact: 
                    <a href="mailto:felixekness@gmail.com">Felix Ekness, </a>
                    <a href="mailto:lhartsough@gmail.com">Lucas Hartsough, </a>
                    <a href="mailto:brian.landry@gmail.com">Brian Landry</a>      
                </span> -->
            </p>
        </div>
        <div class="LPI-menu" ng-controller="formController">
            <div class="device-selection">
                <select class="devices" ng-options = "deviceObject as deviceObject.name for deviceObject in devices"  ng-model="device" ng-change="updateDevice(device)">
                    <option value="" disabled>Select Device</option>
                </select>
                <input type="file" class="upload-sim" title="Upload Experiment Configuration" onchange="angular.element(this).scope().file_changed(this)"></input>
            </div>
            <div class="custom-config" ng-style="{'display': device.display}">
                <div class="plate-config-wrapper">
                    <span class="title">Plate Config</span>
                    <br>
                    <label for="rows">Rows: </label>
                    <input class="rows" type="number" name="rows" placeholder="8" min ="1" step="1" required aria-required=”true” ng-model="device.rows"/>
                    <br>
                    <label for="columns">Columns: </label>
                    <input class="columns" type="number" name="columns" placeholder="8" min="1" step="1" required aria-required=”true” ng-model="device.cols"/>
                </div>
                <div class="LED-config-wrapper">
                    <span class="title">LED Config</span>
                    <br>
                    <label for="LED-quantity">LEDs: </label>
                    <input class="LED-quantity" type ="number" name="LEDnum" placeholder="1" min="0" step="1" required aria-required=”true” max="4" ng-model="ledNum"/>
                    <br>
                    <div class="LED-wavelength-wrapper" ng-repeat="i in getNumber(ledNum) track by $index">
                        <label  for="LED-select-wavelength"><span class="LED-number">{{$index+1}}</span>:</label>
                        <input class="LED-select-wavelength" type="number" name="wavelength" placeholder="600" min="0" max="1000" required aria-required=”true” ng-style="cssRefresh ? {'width':'2.8125rem'} : {'width':'2.8124rem'}" ng-model="device.leds[$index]"/>
                        <div class="LED-select-color"></div>
                    </div>
                </div>
            </div>
            <div class="run-variables">
                <div class="run-header">
                    <label>Program Duration (minutes) </label><input class="time" placeholder="480" ng-model="getParam().time">
                    <br>
                    <label for="randomized">Randomize the positions </label><input class="randomized" type="checkbox" name="randomized" ng-init="getParam().randomized=false" ng-model="getParam().randomized" ng-change="newSeed()"/>
                    <label for="offSwitch">Turn off LEDs upon finish </label><input class="offSwitch" type="checkbox" name="offSwitch"ng-init="getParam().offSwitch=false" ng-model="getParam().offSwitch"/>
                </div>
                <div class="experiment-wrapper" ng-repeat="experiment in getExperiments()" my-experiment="experiment" device="device">
                </div>
                <div class="new-experiment" ng-click="addExperiment()">
                    <div class="add-button"></div>
                    New Experiment
                </div>
            </div>
            <div class="simulate-download-wrapper">
                <div class="simulate" ng-style="simulated ? {'width':'calc(50% - 10px)', 'display':'block'} : {'width':'calc(100% - 10px)'}" ng-click="runSimulation()">Load New Simulation</div>
                <div class="download" ng-click="downloadPlate()" ng-style="simulated ? {'display':'block'}:{'display':'none'}">Download
                    <div class="download-icon-wrapper">
                        <div class="downloading-icon">
                            <span class="custom-arrow"></span>
                        </div>
                        <div class="bar"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="sim-visualization" ng-controller="simController">
            <div class="sim-control">
                <div class="controls-wrapper">
                    <div class="view-type" value ="Well View" ng-click="toggleView()">{{plateView ? 'Well View' : 'Plate View'}}</div>
                    <select class ="LED-display" name="wavelength-selector" ng-options="wavelength for wavelength in getDevice().leds" ng-model="wavelengthIndex">
                        <option value="">All LEDs</option>
                    </select>
                    <div class="index-wrapper">
                        <div class="selected-well-col-row">
                            <div class="row">Row: <span class="row-index"> {{selectedRow}} </span></div>
                            <div class="column">Col: <span class="column-index"> {{selectedCol}} </span></div>
                        </div>
                        <div class="selected-well-index">
                            <div class="well">Well &#35;: <span class="well-index">{{selectedWell}}</span> </div>
                        </div>
                    </div>
                    <label for="sim-speed">Speed</label>
                    <input class="sim-speed plate" type="range" min="0" max="1" step="0.01" ng-model="speedSlider"/>
                    <div class="play-button plate" ng-click="togglePlay()"><div ng-class="simActive ? 'stop-square' : 'play-triangle'"></div></div>
                    <div class="elapsed-time plate">{{prettyTime}}</div>
                    <input class="elapsed-time-vis plate" type="range" min="0" max="1" step="0.001" ng-model="percentTime"/>
                </div>
            </div>
            <div class="simulation">
                <div class="plate-sim plate" ng-style="plateView ? {'visibility':'visible'} : {'visibility':'hidden'}">
                    <canvas class="canvas"></canvas>
                </div>
                <div class="well-sim well" id="wellSim" ng-style="!plateView ? {'visibility':'visible'} : {'visibility':'hidden'}"></div>
            </div>
        </div>


        <div class="popup-graph">
            <div class="title"></div>
            <div class="close"></div>
            <div class="plot" id="wfgSim"></div>
        </div>

        <script src="js/handsontable.full.min.js"></script>
        <script src="js/canvasjs.min.js"></script>
        <script src="js/papaparse.min.js"></script>
        <script src="lib/numeric-1.2.6.js"></script>
        <script src="lib/jszip.min.js"></script>
        <script src="js/FileSaver.js"></script>
        <script src="js/form/formControllers.js"></script>
        <script src="js/form/formDirectives.js"></script>
        <script src="js/form/formServices.js"></script>
        <script src="js/simulation/simControllers.js"></script>
        <script src="js/simulation/simServices.js"></script>
        <script src="js/seedrandom.min.js"></script>
        
    </body>
</html>
